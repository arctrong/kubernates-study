<!DOCTYPE html>
<html>
<head><title>Helm Package Manager</title>
<meta charset="utf-8">
<!-- <link rel="shortcut icon" type="image/png" href="pict/favicon.png"/> -->
<link rel="stylesheet" type="text/css" href="styles.css"/>
<link rel="stylesheet" type="text/css" href="layout.css"/>

</head>
<body>

<div class="header"><i>This is an automatically generated document.</i></div>
<div class="sidebar">
    <table class="sidebarAligner">
        <tr><td valign="top">
            
            <h3>Sections</h3>
            <p><a href="about.html">About the course</a></p>
            <p><a href="index.html">Theory</a></p>
            <p><a href="installation.html">Working environment installation</a></p>
            <p><a href="kubectl_commands.html">Main Kubectl commands</a></p>
            <p><a href="yaml_config_file.html">YAML Configuration file</a></p>
            <p><a href="demo_project.html">Complete demo project</a></p>
            <p><a href="namespaces.html">Namespaces</a></p>
            <p><a href="ingress.html">Ingresses</a></p>
            <p><a href="helm.html">Helm Package Manager</a></p>
            <p><a href="volumes.html">Persisting Data with Volumes</a></p>
            <p><a href="stateful_sets.html">StatefulSets</a></p>
            
            <h3>Side steps</h3>
            <p><a href="external_access.html">Access external Services from outside the Minicube cluster</a></p>
            
        </td></tr>
        <tr><td class="bottom" valign="bottom">
            <i>Generated by md2html_py 0.1.2
            <br />2021-07-12 19:58:52</i>
        </td></tr>
    </table>
</div>

<p>[<a href="ingress.html">BACK</a>] | [<a href="volumes.html">NEXT</a>]</p>
<hr />
<p><p style="font-size: 40px; font-weight: bold;">Helm Package Manager</p></p>
<div class="toc">
<ul>
<li><a href="#helm-package-manager">Helm Package Manager</a></li>
<li><a href="#templating-engine">Templating Engine</a></li>
<li><a href="#use-cases-for-helm">Use Cases for Helm</a></li>
<li><a href="#helm-chart-structure">Helm Chart Structure</a></li>
<li><a href="#release-management">Release management</a></li>
</ul>
</div>
<hr />
<h1 id="helm-package-manager">Helm Package Manager</h1>
<p><a href="https://youtu.be/X48VuDVv0do?t=8658">2:24:18</a></p>
<p>This projects is actively developed now so it changed much from version to version. In this
section just basic features of Helm are discussed.</p>
<p><strong>Helm</strong> is a package manager for K8s (like <code>apt</code> and <code>yum</code>).</p>
<p><a href="https://hub.helm.sh/">Helm hub</a> | 
<a href="https://github.com/helm/charts">Helm charts GitHub Project</a> | 
<a href="https://helm.sh/docs/intro/install/">Install Helm</a></p>
<blockquote>
<p>As for Jul 11, 2021, <a href="https://github.com/helm/charts">Helm charts GitHub Project</a> says:
"This project is no longer supported" and links to <a href="https://artifacthub.io/">Artifact Hub</a>.</p>
</blockquote>
<p><img alt="" src="pict/helm_problem.png" /></p>
<p><img src="pict/helm_solution.png" style="float: left; margin: 0 25px 25px 0;" /></p>
<p>Sometimes we need to deploy a set of components that is pretty standard among different
configurations so some other users may have probably done it. Helm provides a way of collecting
this bundle of YAML files (a <strong>Helm Chart</strong>) into a package and making it available for use in
other K8s clusters (in the <strong>Helm Repository</strong>).</p>
<p>There may be public and private repositories (the latter are accessible inside companies).</p>
<p style="clear: both;"></p>

<hr />
<h1 id="templating-engine">Templating Engine</h1>
<p><a href="https://youtu.be/X48VuDVv0do?t=8946">2:29:06</a></p>
<p><img alt="" src="pict/helm_templating_engine.png" /></p>
<p>It addresses the case when we have a set of microservices which YAML files are almost the same.
Helm allows to define a common blueprint for all of these microservices with placeholders that
will be replaced on deployment. The placeholders look like <code>{{ .Values.name }}</code>. The values are 
defined in the file <code>values.yaml</code> or may be defined in the command line with the <code>--set</code>
parameter.</p>
<hr />
<h1 id="use-cases-for-helm">Use Cases for Helm</h1>
<p>Allows deploying the same application in different application clusters with one command.</p>
<hr />
<h1 id="helm-chart-structure">Helm Chart Structure</h1>
<p>Helm documentation: <a href="https://helm.sh/docs/chart_template_guide/getting_started/">Getting Started</a>.</p>
<p>Helm charts are structured like this:</p>
<pre class="highlight"><code class="language-code">mychart/
  Chart.yaml
  values.yaml
  charts/
  templates/
  ...</code></pre>

<p>The <code>templates/</code> directory is for template files. When Helm evaluates a chart, it will send all
of the files in the <code>templates/</code> directory through the template rendering engine. It then
collects the results of those templates and sends them on to Kubernetes.</p>
<p>The <code>values.yaml</code> contains the default values for a chart. These values may be overridden by users
during helm <code>install</code> or helm <code>upgrade</code>.</p>
<p>The <code>Chart.yaml</code> file contains a description of the chart and can be accessed from within a
template. The <code>charts/</code> directory may contain other charts (which we call <em>subcharts</em>).</p>
<p>The installation command is:</p>
<pre class="highlight"><code class="language-shell">helm install &lt;chartname&gt;</code></pre>

<hr />
<h1 id="release-management">Release management</h1>
<p><a href="https://youtu.be/X48VuDVv0do?t=9345">2:35:45</a></p>
<p>In Helm version 2 there are a client and a server part (the latter called <strong>Tiller</strong>). In this 
architecture Helm copies and stores configurations on each deployment thus creating a history 
of Helm executions (like <code>install</code> or <code>upgrade</code>). <code>rollback</code> command restores the previous
deployment state.</p>
<p>But the problem is that <strong>Tiller</strong> has too much permissions inside the K8s cluster that is
a security issue. So in Helm version 3 Tiller was removed.</p>
<hr />
<p>[<a href="ingress.html">BACK</a>] | [<a href="volumes.html">NEXT</a>]</p>
<hr />
<hr />
<hr />
<hr />
<hr />

</body>
</html>
